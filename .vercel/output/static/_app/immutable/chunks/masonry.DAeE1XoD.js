import{s as S,v as F,e as L,c as R,b as B,f as w,h as y,i as M,w as T,x as W,y as z,z as k,A as D,B as q,C as v}from"./scheduler.m8nR5Aoa.js";import{S as I,i as N,a as P,t as V}from"./index.DmaBKroe.js";import"./marked.esm.RWbm33ss.js";function j(l){let i,s,m,r;const u=l[8].default,n=F(u,l,l[7],null);return{c(){i=L("div"),n&&n.c(),this.h()},l(e){i=R(e,"DIV",{class:!0,style:!0});var o=B(i);n&&n.l(o),o.forEach(w),this.h()},h(){y(i,"class",s=`__grid--masonry ${l[0]?"__stretch-first":""}`),y(i,"style",m=`--grid-gap: ${l[1]}; --col-width: ${l[2]};`)},m(e,o){M(e,i,o),n&&n.m(i,null),l[9](i),r=!0},p(e,[o]){n&&n.p&&(!r||o&128)&&T(n,u,e,e[7],r?z(u,e[7],o,null):W(e[7]),null),(!r||o&1&&s!==(s=`__grid--masonry ${e[0]?"__stretch-first":""}`))&&y(i,"class",s),(!r||o&6&&m!==(m=`--grid-gap: ${e[1]}; --col-width: ${e[2]};`))&&y(i,"style",m)},i(e){r||(P(n,e),r=!0)},o(e){V(n,e),r=!1},d(e){e&&w(i),n&&n.d(e),l[9](null)}}}function H(l,i,s){let{$$slots:m={},$$scope:r}=i,{stretchFirst:u=!1,gridGap:n="0.5em",colWidth:e="minmax(Min(20em, 100%), 1fr)",items:o=[]}=i,p=[],f,{reset:h}=i;const _=async()=>{p.forEach(async t=>{let c=getComputedStyle(t._el).gridTemplateColumns.split(" ").length;t.items.forEach(a=>{let g=a.getBoundingClientRect().height;g!==+a.dataset.h&&(a.dataset.h=g,t.mod++)}),(t.ncol!==c||t.mod)&&(t.ncol=c,t.items.forEach(a=>a.style.removeProperty("margin-top")),t.ncol>1&&t.items.slice(c).forEach((a,g)=>{let b=t.items[g].getBoundingClientRect().bottom,G=a.getBoundingClientRect().top;a.style.marginTop=`${b+t.gap-G}px`}),t.mod=0)})},C=async t=>{await v(),t.length&&getComputedStyle(t[0]).gridTemplateRows!=="masonry"&&(p=t.map(c=>({_el:c,gap:parseFloat(getComputedStyle(c).gridRowGap),items:[...c.childNodes].filter(a=>a.nodeType===1&&+getComputedStyle(a).gridColumnEnd!=-1),ncol:0,mod:0})),_())};let d;k(()=>{d=window,d.addEventListener("resize",_,!1)}),D(()=>{d&&d.removeEventListener("resize",_,!1)});function E(t){q[t?"unshift":"push"](()=>{f=t,s(3,f),s(5,h),s(4,o)})}return l.$$set=t=>{"stretchFirst"in t&&s(0,u=t.stretchFirst),"gridGap"in t&&s(1,n=t.gridGap),"colWidth"in t&&s(2,e=t.colWidth),"items"in t&&s(4,o=t.items),"reset"in t&&s(5,h=t.reset),"$$scope"in t&&s(7,r=t.$$scope)},l.$$.update=()=>{l.$$.dirty&40&&h&&(s(3,f),s(5,h),s(4,o)),l.$$.dirty&24&&o&&(s(3,f),s(5,h),s(4,o)),l.$$.dirty&8&&f&&C([f])},[u,n,e,f,o,h,_,r,m,E]}class Q extends I{constructor(i){super(),N(this,i,H,j,S,{stretchFirst:0,gridGap:1,colWidth:2,items:4,reset:5,refreshLayout:6})}get refreshLayout(){return this.$$.ctx[6]}}export{Q as M};
