# ğŸ”§ Focus Tasks é—®é¢˜ä¿®å¤æ€»ç»“

## ğŸ¯ é—®é¢˜åˆ†æ

ä½ é‡åˆ°çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. **Focus Tasks æ˜¾ç¤ºé—®é¢˜**: æ˜¾ç¤ºä¸º "undefined é¡¹ç›®ç®¡ç†" ç­‰å¥‡æ€ªæ–‡æœ¬ï¼Œè€Œä¸æ˜¯é…ç½®çš„æ­£ç¡®ä»»åŠ¡
2. **ç»Ÿè®¡æ•°æ®ä¸å‡†ç¡®**: æ›´æ–°è´¡çŒ®åï¼Œfocus task çš„æ•°é‡ç»Ÿè®¡æ²¡æœ‰æ­£ç¡®å¢åŠ 

## ğŸ” æ ¹æœ¬åŸå› 

### é—®é¢˜1: é…ç½®åŠ è½½ä¸ä¸€è‡´
- **Stats API** ä½¿ç”¨æ—§çš„ `getFocusTasksConfig()` ä» `focus-tasks.ts`
- **Focus Tasks API** ä½¿ç”¨æ–°çš„ `loadFocusTasksConfig()` ä»é€šç”¨é…ç½®åŠ è½½å™¨
- **å‰ç«¯ç»„ä»¶** æ··åˆä½¿ç”¨ä¸¤ç§ä¸åŒçš„é…ç½®æº

### é—®é¢˜2: Focus Areas åˆ†æé€»è¾‘é”™è¯¯
åŸæ¥çš„ `analyzeFocusAreas()` å‡½æ•°ï¼š
- ä½¿ç”¨ç¡¬ç¼–ç çš„å…³é”®è¯åŒ¹é… ("ç¼–ç¨‹å¼€å‘", "å­¦ä¹ ç ”ç©¶", "é¡¹ç›®ç®¡ç†", "æ–‡æ¡£å†™ä½œ")
- è€Œä¸æ˜¯åŸºäºå®é™…ç”¨æˆ·å®Œæˆçš„ focus tasks è¿›è¡Œç»Ÿè®¡

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. ç»Ÿä¸€é…ç½®åŠ è½½ç³»ç»Ÿ

**æ›´æ–°äº†ä»¥ä¸‹æ–‡ä»¶**:
- `src/routes/api/stats/+server.ts` - ä½¿ç”¨é€šç”¨é…ç½®åŠ è½½å™¨
- `src/lib/components/site/interactive-contribution-graph.svelte` - ç»Ÿä¸€é…ç½®æº
- `src/lib/components/site/checkin-modal.svelte` - æ·»åŠ æœ¬åœ°è½¬æ¢å‡½æ•°

**å…³é”®æ”¹è¿›**:
```typescript
// æ–°çš„é€šç”¨é…ç½®åŠ è½½å™¨
export async function loadFocusTasksConfig(): Promise<FocusTaskConfig[]> {
  // 1. æµè§ˆå™¨ç¯å¢ƒ -> ä» API åŠ è½½
  // 2. æœåŠ¡å™¨ç¯å¢ƒ -> ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½  
  // 3. ç¯å¢ƒå˜é‡ -> è§£æ JSON é…ç½®
  // 4. é»˜è®¤é…ç½® -> å†…ç½®ä»»åŠ¡
}
```

### 2. ä¿®å¤ Focus Areas ç»Ÿè®¡é€»è¾‘

**åŸæ¥çš„é—®é¢˜**:
```typescript
// âŒ ç¡¬ç¼–ç å…³é”®è¯åŒ¹é…
const keywords = {
  'ç¼–ç¨‹å¼€å‘': ['ä»£ç ', 'ç¼–ç¨‹', 'å¼€å‘'],
  'å­¦ä¹ ç ”ç©¶': ['å­¦ä¹ ', 'ç ”ç©¶', 'æ•™ç¨‹']
};
```

**ä¿®å¤åçš„é€»è¾‘**:
```typescript
// âœ… åŸºäºå®é™… focus tasks å®Œæˆæƒ…å†µç»Ÿè®¡
checkins.forEach(checkin => {
  if (checkin.focusTasks && Array.isArray(checkin.focusTasks)) {
    checkin.focusTasks.forEach(task => {
      if (task.isCompleted) {
        const areaObj = areas.find(a => a.name === task.name);
        if (areaObj) {
          areaObj.count = (areaObj.count || 0) + 1;
        }
      }
    });
  }
});
```

### 3. è§£å†³æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜

**é—®é¢˜**: `focus-tasks-universal.ts` åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å¯¼å…¥ Node.js çš„ `fs` å’Œ `path` æ¨¡å—

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨åŠ¨æ€å¯¼å…¥å’Œç¯å¢ƒæ£€æµ‹
```typescript
// æµè§ˆå™¨ç¯å¢ƒ
if (typeof window !== 'undefined') {
  // ä» API è·å–é…ç½®
}

// æœåŠ¡å™¨ç¯å¢ƒ  
if (typeof process !== 'undefined' && isFileSystemAvailable()) {
  const { promises: fs } = await import('fs');
  const { join } = await import('path');
  // ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½
}
```

## âœ… ä¿®å¤æ•ˆæœ

### Focus Tasks æ˜¾ç¤º
- âœ… æ­£ç¡®æ˜¾ç¤ºä½ é…ç½®çš„ 5 ä¸ªä»»åŠ¡ï¼š
  - ğŸ“ Graduation Project
  - ğŸ’» Coding/Logical  
  - ğŸƒ Running
  - ğŸ“š Reading/Learning
  - ğŸ’¬ Communication

### ç»Ÿè®¡å‡†ç¡®æ€§
- âœ… Focus Areas ç»Ÿè®¡åŸºäºå®é™…å®Œæˆçš„ä»»åŠ¡
- âœ… è´¡çŒ®å›¾çº§åˆ«æ­£ç¡®åæ˜ å®Œæˆçš„ä»»åŠ¡æ•°é‡
- âœ… å®Œç¾æ—¥ (Perfect Day) åˆ¤æ–­å‡†ç¡®

### è·¨ç¯å¢ƒå…¼å®¹
- âœ… æœ¬åœ°å¼€å‘ï¼šä»æ–‡ä»¶ç³»ç»ŸåŠ è½½é…ç½®
- âœ… Vercel éƒ¨ç½²ï¼šä»å†…ç½®é…ç½®æˆ–ç¯å¢ƒå˜é‡åŠ è½½
- âœ… æµè§ˆå™¨ç¯å¢ƒï¼šé€šè¿‡ API è·å–é…ç½®

## ğŸ” éªŒè¯æ­¥éª¤

éƒ¨ç½²åè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **ä»»åŠ¡æ˜¾ç¤º**: æ‰“å¡æ¨¡æ€æ¡†æ˜¾ç¤ºæ­£ç¡®çš„ 5 ä¸ªä»»åŠ¡
2. **ç»Ÿè®¡å‡†ç¡®**: å®Œæˆä»»åŠ¡åï¼ŒFocus Areas æ­£ç¡®ç»Ÿè®¡æ•°é‡
3. **è´¡çŒ®å›¾**: å®Œæˆä»»åŠ¡æ•°æ­£ç¡®åæ˜ åœ¨è´¡çŒ®çº§åˆ«ä¸Š
4. **API å“åº”**: è®¿é—® `/api/focus-tasks` è¿”å›æ­£ç¡®çš„ä»»åŠ¡é…ç½®

## ğŸ“Š æ•°æ®æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·å®Œæˆä»»åŠ¡] --> B[ä¿å­˜åˆ° /api/checkin]
    B --> C[æ•°æ®å­˜å‚¨ç³»ç»Ÿ]
    C --> D[/api/stats ç”Ÿæˆç»Ÿè®¡]
    D --> E[æ­£ç¡®çš„ Focus Areas ç»Ÿè®¡]
    E --> F[è´¡çŒ®å›¾æ˜¾ç¤ºå‡†ç¡®æ•°æ®]
```

ç°åœ¨ä½ çš„ focus tasks ç³»ç»Ÿåº”è¯¥èƒ½æ­£ç¡®æ˜¾ç¤ºé…ç½®çš„ä»»åŠ¡åç§°ï¼Œå¹¶å‡†ç¡®ç»Ÿè®¡å®Œæˆæƒ…å†µäº†ï¼ğŸ‰